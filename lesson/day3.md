day3
자료공유 : https://drive.google.com/uc?id=1uUMVULdVip1T99FQeSrOIf92YnCkTZLJ&export=download


# 15.3 문자열 합치기
문자열은 + 과 += 연산을 사용해서 문자열을 이을수 있습니다.

15.3.1 문자열 비교하기
연산자 ==, !=를 사용해서 문자열이 같은지 같지안ㅇㅎ은지 비교합니다. 두문자열이 완전히 같을때 == 연산 결과가 true가 되고 != 연산은 false 가 됩니다.


15.4. 문자열 구조
15.4.1 string 구조 알아보기


```
type StringHeader struct {
    Data uintptr
    Len int
}
```
string 필드가 2개인 구조체 입니다. 첫번째 필드 Data 는 uintptr 타입으로 문자열의 데이터가 있는 메모리 주소를 나타내는 일종의 포인터입니다. 두번째 필드 len 은 int 타입으로 문자열의 길이를 나타냅니다.

[unsafe 패키지와 함께하는 안전하지 않은 캐스팅](https://w.cublr.com/programming/go/unsafe-casting/)
아비러터리타입? 씨언어의 보이드퍼ㅗ인터 같은거. 줄기세포마냥 머든 될 수 있다.
[Package unsafe](https://runebook.dev/ko/docs/go/unsafe/index)

15.5 문자열은 불변이다

문자열은 `불변(immutable)` 입니다. 불변이라는 말은 string 타입이 가리키는 문자열의 일부만 변경 할 수 없다는 말입니다. 
```go
var str string  = Hello world"
str = "how are you?"        //전체바꾸기는 가능
str[2] = 'a'                //Error 일부 바꾸기는 불가능
```

# 16.패키지
# 16.1 패키지
패키지package 란 Go 언어에서 코드를 묶는 가장 큰 단위 입니다.
# 16.2.1 임포트하기
```
import "fmt"

import (
    "fmt"
    "os"
)
```

### 16.2.4 겹치는 패키지 문제 별칭으로 풀기

```
import (
    "text/templa"           //template 패키지
    htemplate "html/template"   //별치 htempalte
    )
```

### 16.2.5 사용하지 않는 패키지 포함하기

```
    "database/sql"
    _ "github.com/mattn/go-sqlite3"     //밑줄 _ 을 이용해서 오류 방지
```

### 16.2.6 패키지 설치하기
import 로 패키지를 포함 시키면 go build 를 통해서 빌드할때 해당하는 패키지를 찾아서 포함한 다음 실행 파일을 생성합니다. 그럼 Go는 import된 패키지를 어떻게 찾을까요? 세가지 방법으로 패키지를 찾습니다.   

## 16.3 Go 모듈
Go 모듈은 Go 패키지들을 모아놓은 Go 프로젝트 단위입니다. Go 1.16 버전부터 Go 모듈 사용이 기본이 됐습니다. 이전까지 Go 모듈을 만들지 않는 Go 코드는 모두 GOPATH/src 폴더 아래에 있어야 했지만 Go 몯류이 기본이 되면서 모든 Go 코드는 Go 모듈 아래 있어야 합니다.

*go build를 하려면 반드시 Go 모듈 루트 폴더에 go.mod 파일이 있어야합니다.* go.mod 파일 은 모듈 이름과 Go 버전 , 필요한 외부 패키지 등이 명시되어있습니다. Go 언어에서는 go build 를 통해 실행 파일을 만들때 go.mod와 외부저장소 패키지 버전 정보를 담고 있는 go. sum 파일을 통해 외부 패키지와 모듈 내 패키지를 합쳐서 실행 파일을 만들게 됩니다.

## 16.4 패키지명과 패키지 외부공개
Go 언어에서 패키지명은 수비고 간단하게 이름지을 것을 권장합니다. 그리고 모든 문자를 소문자로 할것을 권장하고 있습니다. 패키지 전역으로 선언된 첫글자가 대문자로 시작되는 모든변수, 상수, 타입, 함ㅅ, 메서드는 패키지 외부로 공개됩니다. 구조체 이름의 첫글자가 대문자이고 필드명 역시 첫글자가 대문자인 ㅜ구조체의 필드 역시 패키지 외부로 공개됩니다.



# 16.5 패키지 초기화
패키지를 임포트하면 어떤 일이 벌어질까요? 패키지를 임포트하면 컴파일러는 패키지 내 젆역 변수를 초기화 합니ㅏ. 그런 다음 패키지에 init() 함수가 있다면 호출해 패키지를 초기화합니다. init() 함수는 반드시 입력 매개변수가 없고 반환값도 없는 함수 영야합니다. *만약 어떤 패키지의 초기화 함수인 init() 함수 기능만 사용하기 원할 경우 밑줄 _을 이용해서 임포트합니다.*

```
imoprt
    "databasesql"
    _ "github.com/matn/go-sqlimte3" //밑줄 _을 이용해서 init() 함수 호출
```


#18 슬라이스

### 18.1 슬라이스 선언
일반적인배열은 처음 배열을 마들때 정한 길이에서더이상 늘어나지 않는 문제가 있습니다.

만약 위와 같이 int값 10개를 저장하는 배열을 만들면 최대 10개까지 값을 저장 할 수있습니다.
```
var slice []int
```

{}를 이용해 초기화하기
```
var slice1 =  [] int {1,2,3}
var slice2 =  [] []int {1,5:2, 10:3}
```
make()를 이용한 초기화
두번째 초기화 방법은 amke()내장 함수를 사용하는 방법입니다.

```
var slice = make([]int, 3)
```

18.1.3 슬라이스순회
```
var slice = []int{1,2,3}

for i:=0 i<len(slice); i++ {
    slice[i] +=10
}

for i, v := range slice {
    slice[i] = v*2
}

```

### 18.2.2 슬라이스와 배열의 동작 차이

### 18.4.2 요소삭제

### 18.4.3 요소추가

### 18.5 슬라이스 정렬
Go 언어에서 기본 제공하는 sort 패키지를 사용해 슬라이스를 정렬하는 방법을 알아보겠습니다.

int 슬라이스와 구조체 슬라이스를 정렬해 보겟습니다.



# 19 메서드
`메서드는(method)` 함수의 일종입니다. Go 언어에는 클래스가 없습니다. 그래서 구조체 밖에 메서드를 지정합니다. 구조체 밖에 메소드를 정의할 때 리시버라는 특별한 기능으르 사용합니다.
## 19.1 메서드 선언

메서드를 선언하려면 리시버를 unc 키워드와 함수 이름 사이에 소괄호로 명시해야 합니다. 리서버를 사용해서 메서드를 정의하는 코드를 살펴봅시다.
```
func (리시버)  메서드명() int {}
func (r Rabbit) int() int {
    return r.width * r.height
}
```


#20 인터페이스
인터페이스란 구현을 포함하지 않는 메서드 집합입니다. 구체화된 타입이 아닌 인터페이스만 가지고 메서드를 호출 할 수 있어 추후 프로그램 요구사항 변경 시 유현하게 대처할 수 있습니다.


```
type DuckerInterface interface {
    Fly()
    Walk(distance int) int
}

20.3 덕타이핑
Go 언어에서는 어떤 타입이 인터페이스를 포함하고 있는지 여부를 결정할 대 덕타이핑 방식을 사용합니다. 덕타이핑 방식이란 타입 선언 시 인터페이스 구현 여부를 명시적으로 나타낼 필요없이 인터페이스에 정의한 메서드 포함 여부만으로 결정하는 방식입니다.
```
type Stringer interface {
    String() string
}

20.5 인터페이스 변환하기
인터페이스 변수를 타입 변환을 통해서 구체화된 다른 타입이나 다른 인터페이스로 변환할 수 있습니다. 이번절에서는 인터페이스 변환 사용법과 주의점에 대해서 알아보겠습니다.
- 구체화된 다른 타입으로 타입 변환하기
- 다른 인터페이스로 타입 변환하기


20.5.1 구체화된 다른 타입으로 타입 변환하기
인터페이스 변수를 다른 구체화된 타입으로 타입 변환할 수 있습니다. 이 방법은 인터페이스를 본래의 구체화된 타입으로 복원할 때 주로 사용합니다. 사용방법은 인터페이스 변수 뒤에 점 . 을 찍고 소괄호() 안에 변경하려는 타입을 써주면 됩니다.
```
var a Interface
t:= a.(ConcreteType)
인터페이스 변수 a를 ConcreteType으로 변환해 ConcreteType타입 변수 t를 생성하고 대입
```

# 21 함수 고급편
## 21.1 가변인수 함수
fmt 패키지의 Println 함수는 인수 개수가 정해져 있지 않습니다.
```
fmt.Println()       //인수가 없을수도있고
fmt.Println(1)          //인수가 1개일수도 있고
fmt.Println(1,2,3,4,5,6,7,,8,9,0,) //인수가 많을수도있습니다.
```

## 21.2 defer 지연실행
때론 함수가 종료되기 직전에 실행해야 하는 코드가 있ㅇ르수 있습니다. 대표적으로 파일이나 소켓 핸들처럼 OS 내부 자원을 사용하는 경우입니다. 파일을 생성하거나 읽을때 OS 에 파일 핸들을 요청합니다. 그러면 윈도우, 리눅스, 맥 같은 OS 는 파일 핸들을 만들어서 프로그램에 알려줍니다. 하지만 이같은 자원은 OS 내부자원이기 때문에 반스기 쓰고 나서 OS에 되돌려 줘야 합니다. 프로그램에서 OS 내부 자원을 되돌려 주지 않으면 내부자원이 고갈되어 더는 파일을 만들지 못하거나 네트워크 통신을 하지 못할수 있습니다.

```
defer 명령문
```
이와같이 적으면 명령문이 바로 실행 되는 게 아닌 해당 함수가 종료되기 직전에 실행되도록 지연됩니다. 명령문은 한줄의 코드로 일반적으로 함수 호출을 사용합니다. 

## 21.3 함수타입 변수


```
func getOperator(op string) func (int,int) int
```


22 자료구조
자료구조란 여러데이터를 저장하느 구조를 말합니다. 앞서 배운 배열, 슬라이스 도 자료구조의 일종입니다.

22.1 리스트



# 24. 고루틴과 동시성 프로그래밍
고루틴(goroutine) 은 Go 언어에서 관리하는 경량 스레드입니다. 함수나 명령을 동시에 수행할때 사용합니다. 여러 고루틴을 갖는 프로그램을 코딩하는것을 동시성 프로그래밍 Concurrent Programming 이라고 합니다.

[cpu affinity](https://smallake.kr/?p=1956) cpu를 못 움직이게 한다.

## 24.4 동시성 프로그래밍 주의점
동시성 프로그래밍의 문제점은 동잃나 메모리 자원에 여러 고루틴이 접근할 대 발생 합니다.

## 24.5 뮤텍스를 이용한 동시성 문제 해결
뮤텍스는 mutual exclusion의 약자입니다. 우리말로 상호 배제로 직역할 수 있습니다. 역할로는 자원 접근 권한 이라고 볼수 있습니다.


[D2 네이버 - goLang 도입기 리뷰 - 1 시간 영상](https://www.youtube.com/watch?v=B7TF6yIRsWs)
[1일1고](https://www.youtube.com/playlist?list=PLm769nmu3JRCgWB5jjykA5kD4AVBeFK-P)